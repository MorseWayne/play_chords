# Change: 增加和弦走向练习（Chord Progression Practice）

## Why

当前应用已经支持“单个和弦”的选择、指法展示与试听，但用户在真实练习中更常见的需求是**练习和弦走向（和弦进行）**：在节拍下按固定节奏切换和弦、形成肌肉记忆，并通过反复循环提升流畅度。

相较于静态的“列举一些常见走向+试听”，本提案希望新增一个**动态、交互性强**的练习模式，让用户可以在不同调性、不同速度与不同练习模式下持续练习同一个走向，并获得可操作的反馈。

## What Changes

- 新增“和弦走向练习”入口与页面/模块
- 提供常见和弦走向库（如 I–V–vi–IV、ii–V–I、12 小节布鲁斯等），每个走向可试听
- 支持将走向在任意调性下生成具体和弦（显示和弦名 + 罗马数字）
- 走向练习为动态播放：按 BPM 与节拍设置自动推进当前和弦，支持循环、暂停/继续、上一/下一和弦
- 提供高交互练习模式（MVP 目标）：
  - 跟随模式：显示当前/下一和弦，边听边练
  - 记忆模式：可隐藏下一和弦，按需揭示并记录练习过程
  - 听辨模式：播放下一和弦，用户从选项中选择正确答案以形成听感训练
- 练习设置持久化（最后一次走向/调性/BPM/每个和弦持续拍数/播放方式等）

## Impact

### Affected specs

- **新增 capability**: `progression-practice`（和弦走向练习）

### Affected code (预估)

- **新增页面/路由**：
  - `src/app/progression-practice/page.tsx`（或类似结构）
- **新增组件**：
  - 走向库列表、走向播放器、练习模式面板、练习结果/统计面板等
- **新增/扩展 hooks 与 lib**：
  - 走向数据模型与生成（基于罗马数字与调性）
  - 音频调度：复用 `useAudio` 的扫弦/分解播放，并按节拍推进
- **可能受影响的现有模块**：
  - `src/hooks/useAudio.ts`：需要更清晰的“按时间播放一串和弦事件”的接口（如当前不存在）
  - `src/hooks/useMetronome.ts`：可能与走向的 count-in/节拍同步策略联动

### Breaking Changes

无破坏性变更（纯新增能力）。

## Assumptions / Non-Goals (MVP)

- 不做麦克风拾音/识别用户弹奏正确与否（不做音高识别与评分）
- 不要求用户登录，不做跨设备同步（仅使用本地持久化）
- 走向库以“常见流行/摇滚/民谣/蓝调”等为主，后续再扩展风格与自定义走向

## Future Enhancements

- 自定义走向编辑器（拖拽/输入罗马数字/和弦符号）
- 走向与节拍器/节奏型联动（节奏型：D D U U D U 等）
- 渐进速度训练（自动加速、分段练习、错题本）
- 更丰富的试听（不同分解/扫弦 pattern、不同音区与和弦转位）
