# Implementation Tasks

## 1. 走向库与数据模型

- [x] 1.1 定义走向数据结构（id/name/romanNumerals/tags/defaultBpm 等）
- [x] 1.2 内置一组常见走向（至少包含：I–V–vi–IV、I–vi–IV–V、ii–V–I、12 小节布鲁斯、Andalusian）
- [ ] 1.3 走向列表 UI：浏览/搜索/按标签筛选
- [x] 1.4 走向试听入口（选择走向即可试听，或列表中提供试听按钮）

## 2. 走向生成（罗马数字 → 具体和弦）

- [x] 2.1 实现 `progression -> chords` 生成逻辑（给定 key 与 romanNumerals 输出 `{ key, suffix }[]` 或 chord name 列表）
- [x] 2.2 覆盖常见大调走向映射（I, ii, iii, IV, V, vi, vii°）
- [x] 2.3 覆盖常见小调走向映射（i, III, VII, VI, V 等，MVP 先覆盖自然小调常用）
- [ ] 2.4 为生成逻辑补充最小单元测试（如引入测试框架则同步在任务中落地；否则至少提供可运行的开发验证脚本/页面用例）

## 3. 动态播放与节拍推进

- [x] 3.1 抽象“走向播放会话”状态（当前 index、播放中/暂停、循环、beatsPerChord）
- [x] 3.2 复用现有扫弦/分解播放，新增“按节拍播放一串和弦事件”的调度接口（若现有 `useAudio` 不支持则扩展）
- [ ] 3.3 实现 count-in（开始前 1 小节倒数，可选）
- [x] 3.4 UI 同步：高亮当前和弦、显示下一和弦、显示进度/拍点
- [x] 3.5 控制：开始/暂停/停止、上一和弦/下一和弦、重置到开头

## 4. 练习模式（高交互）

- [x] 4.1 跟随模式（Follow）：显示当前+下一和弦，按节拍推进
- [x] 4.2 记忆模式（Memory）：隐藏下一和弦/或隐藏全部，仅在需要时揭示；记录揭示次数/中断次数等简单统计
- [x] 4.3 听辨模式（Ear）：播放下一和弦，用户从 4 个选项中选择；记录正确率与连对次数

## 5. 持久化与无障碍

- [x] 5.1 localStorage 持久化最后一次会话设置（走向、调性、BPM、beatsPerChord、模式等）
- [x] 5.2 键盘操作：空格播放/暂停，左右方向键切换上一/下一和弦，ESC 停止
- [ ] 5.3 为关键控件补充 aria-label 与可聚焦顺序

## 6. 文档与验证

- [x] 6.1 更新 README：增加“和弦走向练习”说明与入口
- [ ] 6.2 自测：桌面端与移动端的核心流程跑通（选择走向→试听→开始练习→切模式→持久化）

